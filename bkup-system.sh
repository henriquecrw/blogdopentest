#! /bin/bash

mount -t ext4 /dev/sdX /media/ # Configure, seu HD para ser montado automáticamente

#Lista de Diretórios
dirdate=$(date +'%d-%m-%Y')
backupopt=/media/System-Backup/$dirdate/opt/
backupvar=/media/System-Backup/$dirdate/var/
backupetc=/media/System-Backup/$dirdate/

if [ -d $backupopt ]; then
	echo "Directory $backupopt exist!"
else
	mkdir -p -v $backupopt
fi

#Var - contêm muitos arquivos que você pode querer fazer backup na maioria dos casos
rsync -a -v --protect-args  /var/www $backupvar
rsync -a -v --protect-args /var/mail $backupvar
rsync -a -v --protect-args /var/lib $backupvar

#Opt - distribuições não inclusas no Linux
rsync -a -v --protect-args /opt/ $backupopt

#Etc - configurações do sistema
rsync -a -v --protect-args /etc $backupetc
